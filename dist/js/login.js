!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=161)}({0:function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},1:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},10:function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(32),u=(r=i)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,u.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},11:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},12:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},13:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},14:function(t,e,n){var r=n(5),i=n(16);t.exports=n(2)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},15:function(t,e,n){var r=n(17);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},157:function(t,e){},158:function(t,e){},159:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(11)),i=a(n(10)),u=a(n(48));function a(t){return t&&t.__esModule?t:{default:t}}n(158);var o=function(){function t(e,n,i){(0,r.default)(this,t),this.wrap=e,this.msgs=n,this.submitFn=i,this.curMsg=null,this.answers=[],this.init()}return(0,i.default)(t,[{key:"createHtml",value:function(){for(var t,e=this.process.bind(this),n=this.msgs,r="",i=0;t=n[i++];){var u=e(t);if(r+=t.html,!u)break}return r}},{key:"process",value:function(t){var e=this.some,n=t.html;return this.curMsg=JSON.parse(JSON.stringify(t)),e(t.status,4)||e(t.status,5)||(n=n.replace(/^<p/,"<p data-id='"+t.id+"' ")),e(t.status,2)&&(n=n.replace(/<Terminal-Input\/>/,'<span class="terminal-input-wrap"></span>')),e(t.status,3)&&(n=n.replace(/^<p/,"<p data-limited='"+t.limited+"' ")),e(t.status,2)?(t.html=n,t.status=[4]):(e(t.status,0)||e(t.status,1))&&(t.status=[5]),!/terminal-input-wrap/.test(n)}},{key:"some",value:function(t,e){return t.some(function(t){return t===e})}},{key:"validate",value:function(){var t=this.curMsg,e=this.wrap,n=this.msgs,r=this.answers,i=this.some,u=t.id,a=new RegExp(t.html.replace(/<Terminal-Input\/>/,"(.+?)$").replace(/<.+?>/g,"")),o=e.querySelector("[data-id='"+u+"']"),s=o.outerHTML,c=a.exec(s.replace(/<.+?>/g,""))[1];if(/(?:^-h|^--help)/.test(c))return openHelpLayer(),p(),!1;if(/data-limited/.test(s)&&!i(o.getAttribute("data-limited").split(","),c))return p(),!1;for(var l,f=0;l=n[f];++f)if(l.id===u){n[f].html=s,n[f].status=[5];break}return r.push(c),!0;function p(){for(var e,r=0;e=n[r];++r)if(e.id===u){n[r]=JSON.parse(JSON.stringify(t));break}}}},{key:"enterHandle",value:function(t){if(13===t.keyCode){if(this.validate(),this.msgs.every(function(t){return 5===t.status[0]}))return void this.submitFn(this.answers);this.update()}}},{key:"update",value:function(){this.wrap.innerHTML=this.createHtml(),new u.default(this.$(".terminal-input-wrap")),this.bindEvent()}},{key:"bindEvent",value:function(){this.$(".terminal-input-textarea").addEventListener("keyup",this.enterHandle.bind(this),!1)}},{key:"$",value:function(t){return this.wrap.querySelector(t)}},{key:"init",value:function(){this.update()}}]),t}();e.default=o},16:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},160:function(t,e,n){"use strict";var r,i=n(18),u=n(159),a=(r=u)&&r.__esModule?r:{default:r};n(157);var o=(0,i.$)(".dialogue-wrap"),s=["name","email","isRemember","type"];new a.default(o,[{id:1,html:"<p>[]Mon Jan 22 19:39:25 on 123.207.121.188[]</p>",status:[0],limited:[]},{id:2,html:"<p>Mr.garven: What's your name?</p>",status:[1],limited:[]},{id:3,html:"<p>user: <Terminal-Input/></p>",status:[2],limited:[]},{id:4,html:"\n              <p>\n                Mr.garven: Whatâ€™s your email? (To be ease,only I know.Just to be\n                sure that you can receive mine or others reply till\n                that time.)\n              </p>\n            ",status:[1],limited:[]},{id:5,html:"<p>user: <Terminal-Input/></p>",status:[2],limited:[]},{id:6,html:"<p>Mr.garven: Would you like to remember above infomations?[y/n]</p>",status:[1],limited:[]},{id:7,html:"<p>user: <Terminal-Input/></p>",status:[2,3],limited:["y","n"]},{id:8,html:"\n              <p>\n                Mr.garven: Which type of chatroom would you wanna enter? Multiple or\n                Personal[m/p]\n              </p>\n            ",status:[1],limited:[]},{id:9,html:"<p>user: <Terminal-Input/></p>",status:[2,3],limited:["m","p"]}],function(t){var e=document.createElement("form");e.action="/login",e.method="post",t.forEach(function(t,n){var r=document.createElement("input");r.type="text",r.name=s[n],r.value=t,e.appendChild(r)});var n=document.createElement("input");n.type="submit",e.appendChild(n),document.body.appendChild(e),e.submit(),document.body.removeChild(e)});var c=(0,i.$)(".popup-wrap");document.addEventListener("keyup",function(t){27===t.keyCode&&c.classList.add("hide")},!1)},161:function(t,e,n){t.exports=n(160)},17:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},18:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.$=function(t){return document.querySelector(t)},e.$s=function(t){return document.querySelectorAll(t)}},2:function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},24:function(t,e,n){var r=n(3);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},25:function(t,e,n){var r=n(3),i=n(1).document,u=r(i)&&r(i.createElement);t.exports=function(t){return u?i.createElement(t):{}}},26:function(t,e,n){t.exports=!n(2)&&!n(13)(function(){return 7!=Object.defineProperty(n(25)("div"),"a",{get:function(){return 7}}).a})},3:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},30:function(t,e,n){var r=n(8);r(r.S+r.F*!n(2),"Object",{defineProperty:n(5).f})},31:function(t,e,n){n(30);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},32:function(t,e,n){t.exports={default:n(31),__esModule:!0}},47:function(t,e){},48:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(11)),i=a(n(10)),u=n(18);function a(t){return t&&t.__esModule?t:{default:t}}n(47);var o=function(){function t(e,n,i){(0,r.default)(this,t),this.$wrap=e,this.$text=null,this.resultFn=i,this.$textarea=null,this.$blurtab=null,this.$output=n,this.init()}return(0,i.default)(t,[{key:"$",value:function(t){return this.$wrap.querySelector(t)}},{key:"createHtml",value:function(){this.$wrap.innerHTML='\n        <p class="terminal-input-text"></p>\n        <textarea class="terminal-input-textarea" cols="30" rows="10"></textarea>\n      ',this.createFakeTab()}},{key:"createFakeTab",value:function(){if(!(0,u.$)(".js-blur-tab")){var t=document.createElement("input");t.className="js-blur-tab",t.type="text",document.body.appendChild(t)}}},{key:"createContent",value:function(t,e){var n=this.createSpan,r="",i="",u="",a='<span class="cursor-before-and-after cursor-char"></span>',o=t.substring(0,e).split("").map(function(t){return/\s/.test(t)?"&nbsp;":t}),s=t.substring(e,t.length).split("").map(function(t){return/\s/.test(t)?"&nbsp;":t});return 0===o.length&&0===s.length?u=a:o.length>0&&0===s.length?(o.forEach(function(t){r+=n(t)}),u='\n        <span class="cursor-before">\n          '+r+"\n        </span>\n        "+a+"\n      "):s.length>0&&(o.forEach(function(t){r+=n(t)}),s.slice(1).forEach(function(t){i+=n(t)}),u='\n        <span class="cursor-before">\n          '+r+'\n        </span>\n        <span class="cursor-after">\n          <span class="cursor-middle cursor-char '+(/\w/.test(s[0])?"en":"cn")+'">'+s[0]+"</span>\n          "+i+"\n        </span>\n      "),u.replace(/(?:[\r\n]|\s{2,})/g,"")}},{key:"createSpan",value:function(t){return/\w/.test(t)?'<span class="cursor-char en">'+t+"</span>":'<span class="cursor-char cn">'+t+"</span>"}},{key:"focusHandle",value:function(t){var e=this.$text,n=this.$textarea;""===e.innerHTML&&(e.innerHTML='<span class="cursor-before-and-after cursor-char"></span>'),n.focus(),e.classList.add("shrink"),t.stopPropagation()}},{key:"blurHandle",value:function(){this.$text.classList.remove("shrink")}},{key:"tabHandle",value:function(t){var e=this.$blurtab;9===t.keyCode&&e.focus()}},{key:"keyupHandle",value:function(t){var e=this.$wrap,n=this.$text,r=this.$output,i=this.$textarea,u=this.createContent.bind(this),a=this.resultFn;n.innerHTML=u(i.value,i.selectionStart),13===t.keyCode&&(/(?:^-h|^--help)/.test(i.value)?openHelpLayer():a?a(i.value):r?r.innerHTML+=r.innerHTML:e.outerHTML=i.value.replace(/[\r\n]/g,""),i.value="",n.innerHTML='<span class="cursor-before-and-after cursor-char"></span>')}},{key:"bindEvent",value:function(){var t=this.$text,e=this.$textarea;t.addEventListener("click",this.focusHandle.bind(this),!1),document.addEventListener("click",this.blurHandle.bind(this),!1),document.addEventListener("keydown",this.tabHandle.bind(this),!1),e.addEventListener("keyup",this.keyupHandle.bind(this),!1)}},{key:"init",value:function(){this.createHtml(),this.$text=(0,u.$)(".terminal-input-text"),this.$textarea=(0,u.$)(".terminal-input-textarea"),this.$blurtab=(0,u.$)(".js-blur-tab"),this.$content=(0,u.$)(".content"),this.bindEvent(),this.$text.click()}}]),t}();e.default=o},5:function(t,e,n){var r=n(7),i=n(26),u=n(24),a=Object.defineProperty;e.f=n(2)?Object.defineProperty:function(t,e,n){if(r(t),e=u(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},7:function(t,e,n){var r=n(3);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},8:function(t,e,n){var r=n(1),i=n(0),u=n(15),a=n(14),o=n(12),s=function(t,e,n){var c,l,f,p=t&s.F,d=t&s.G,h=t&s.S,v=t&s.P,m=t&s.B,y=t&s.W,b=d?i:i[e]||(i[e]={}),w=b.prototype,g=d?r:h?r[e]:(r[e]||{}).prototype;for(c in d&&(n=e),n)(l=!p&&g&&void 0!==g[c])&&o(b,c)||(f=l?g[c]:n[c],b[c]=d&&"function"!=typeof g[c]?n[c]:m&&l?u(f,r):y&&g[c]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):v&&"function"==typeof f?u(Function.call,f):f,v&&((b.virtual||(b.virtual={}))[c]=f,t&s.R&&w&&!w[c]&&a(w,c,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s}});